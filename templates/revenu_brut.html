{% extends 'base.html' %}

{% block content %}
<style>
  main{
    margin:1rem;
  }
  .card{
    margin-bottom:1rem;
    margin-top:1rem;
  }
</style>
<h1>import revenu_brut</h1>
<h2>Class RevenuBrut</h2>
<h3>Constructors</h3>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Constructor and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#revenu_brut">RevenuBrut(boolean est_vendeur=False, Auto cauto=advantage_auto.Auto(1,1), int frais_repas=0, int hebergement=0, int frais_representation=0, int frais_stationnement=0, int membre_commerce=0, int cout_ordinateur=0)</a><br>À savoir si on calcul le salaire comme un vendeur à la commission ou un salarié, classe Auto pour le calcul de déduction selon l'article 8, montant <b>déductible</b> pour les frais de repas à concurrence de 50%, montant <b>déductible</b> pour l'hébergement, montant <b>déductible</b> pour les frais de représentation <i>seulement pour employé vendeur à la commission</i>, montant <b>déductible</b> pour les frais de stationnement chez des clients, montant <b>déductible</b> pour les être Membre à la Chambre de commerce <i>seulement pour employé vendeur à la commission</i>.</td>
    </tr>
  </tbody>
</table>

<h3>Method Summary</h3>

<table class="table">
  <thead>
    <tr>
      <th scope="col" class="w-25">Modifier and Type</th>
      <th scope="col">Method and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Double</td>
      <td><a href="#action">action(ArrayList&lt;Double, Double, Integer&gt; *args, int vente = 0, double prix_vente = 0, boolean deduction_employe = False)</a><br>Prix en vigueur Prix payé et Nombre d'actions acquises, le prix vendu, à savoir si la déduction relative aux options d'achat d'actions selon l'alinéa 110(1)d est applicable.<br><b>Combinaisons possibles:</b><br><ul><li>Vendues</li><li>Non-vendues, <i>déduction de la moitié de l'avantage incluse</i></li></ul></td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#sb">sb(double salaire_net = 0, double impot_revenu_fed_prov = 0, double rrq = 0, double ass_emploi = 0, double ass_parentale = 0, double rpa = 0, double cot_syndic = 0, double ass_collectif = 0)</a><br>Impôt sur le revenu fédéral et provincial, le régime de rente du Québec, l'assurance-emploi, le régime québécois d'assurance parentale, le régime de pension agréé <a href="#rbe">non imposable</a>, la cotisation syndicale <a href="#dah">déclarer dans dah</a>.<br><i>Salaire net plus <b>déduction</b> à la source.</i></td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#rbe">rbe(double salaire_brut = 0, double commission_brute = 0, double patron_voyage_perso = 0, double patron_frais_scol_perso = 0, double advantage_pret = 0, double honoraire_admn = 0, double patron_cot_av = 0, double patron_stationnement_perso = 0, double advantage_action = 0, double patron_cot_reer = 0, double patron_frais_representation = 0, double patron_cot_rpa = 0, double patron_cot_rac = 0, double patron_frais_scol_travail = 0, double patron_frais_deplacement = 0)</a><br>Salaire brut de l'employé, la commission brute de l'employé, voyage personnelle/vacance payées par l'employeur, remboursement des frais de scolarité <i>sujet d'intérêt personnel</i>, avantage imposable pour prêt à taux réduit, honoraires d'administrateur, cotisation de l'employeur à une assurance-vie <b><i><u>non imposable</u></i></b>, coût de stationnement au lieu d'emploi habituel, avantage imposable selon l'article 7 pour les options d'achat d'actions levées, contribution au reer payé par l'employeur, allocation fixe des frais de représentation annuelle, cotisation de l'employeur au RPA <i>régime de pension agrée</i> <b><i><u>non imposable</u></i></b>, cotisation de l'employeur à un régime d'assurance collectif contre la maladie ou les accidents <b><i><u>non imposable</u></i></b>, formation liée aux activités de l'entreprise <b><i><u>non imposable</u></i></b>, remboursement de frais de déplacement pour fins d'affaires <b><i><u>non imposable</u></i></b>.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#bure">bure(double fourn_cons = 0, double loyer_bureau = 0, int mois = 0, double salaire_adjoint = 0)</a><br>Les dépenses de bureau <b>déductibles</b>. <i>Viens après le calcul rbe.</i><br>Fourniture consomméee (Papetrie), loyer de bureau annuel <u>à déclarer avec <b>mois</b></u>, salaire d'un adjoint annuel.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#dah">dah(double depense_ext = 0, double cot_syndic = 0, double rpa = 0, double bureau_centre_ville = 0, double cot_professionnelle = 0, double don = 0, double frais_cartes_affaires = 0)</a><br>Dépenses à l'extérieur de l'établissement Hébergement Transport autre que la voiture encourus pour le compte de l'employeur alors que l'employé était à l'extérieur de l'établissement, la cotisation syndicale, paiement au régime de pension agréé, les dépenses de bureau <i>utiliser <a href="#bure">bure</a></i>, la cotisation professionnelle, les dons sont <u><b>non déductibles</b></u>, les frais de cartes d'affaires sont <u><b>non déductibles</b></u>.<br><i>Mention <u>obligatoire</u> après la fonction <a href="#rbe">rbe</a></i>.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#dahv">dahv(double telephone_bureau_centre_ville = 0, double publicite = 0, double location_ordi = 0)</a><br>Frais de téléphonie aux fins d'affaires, publicité, location d'ordinateur.<br><i>Dépenses limités aux revenus de commissions</i>.<br><i>Complémentaire à <a href="#dah">dah</a></i>.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#calcul">calcul()</a><br><ul><li><a href="#action">action()</a> <i>optionnel</i></li><li><a href="#sb">sb()</a> <i>optionnel</i></li><li><a href="rbe">rbe()</a></li><li><a href="#bure">bure()</a> <i>optionnel</i></li><li><a href="#dah">dah()</a></li><li><a href="#dahv">dahv()</a> <i><a href="#revenu_brut">si est_vendeur=True</a></i></li><li><a href="#calcul">calcul()</a></li></ul></td>
    </tr>
  </tbody>
</table>


<div class="card" id="revenu_brut">
  <div class="card-header">
    RevenuBrut
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">RevenuBrut(cauto=cauto, est_vendeur=True, frais_repas=8000, hebergement=18000, frais_representation=2800, frais_stationnement=900, membre_commerce=500) # 235<br><pre>class RevenuBrut:
    def __init__(self, est_vendeur=False, cauto=auto.Auto(1,1), frais_repas=0, hebergement=0, frais_representation=0, frais_stationnement=0, membre_commerce=0, cout_ordinateur=0):
        self.revenu_brut_emploi = 0
        self.deduction_auto = 0
        self.deduction_article_huit = 0
        self.deduction_article_huit_vendeur = 0
        self.commission_brute = 0
        self.salaire_brut = 0
        self.bureau = 0
        self.advantage_action = 0
        self.cauto = cauto
        self.est_vendeur = est_vendeur
        self.frais_repas = frais_repas
        self.hebergement = hebergement
        self.frais_representation = frais_representation
        self.frais_stationnement = frais_stationnement
        self.membre_commerce = membre_commerce
        self.patron_frais_deplacement = 0
        self.revenu_net_emploi = 0
        self.rpa = 0</pre></li>
  </ul>
</div>

<div class="card" id="#action">
  <div class="card-header">
    action
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item"><b>Combinaisons possibles:</b><br><ul><li>action([26, 20, 200], [28, 20, 400], vente = 600, prix_vente=38, deduction_employe = 1) # 224</li><li>action([140, 130, 200], deduction_employe=True) # 226</li></ul><br><pre>def action(self, *args, vente = 0, prix_vente = 0, deduction_employe = False):
    # [valeur, valeur_reduit, nb_action]
    nb_actions = 0
    for i in args:
        nb_actions += i[2]
    if vente > nb_actions:
        print("[ERREUR] action le nombre d'actions vendues ne peut pas être plus grand que le nombre d'actions détenues", vente, nb_actions)
        return 0
    avantage_imposable = 0
    prix_payes = 0
    for i in args:
        avantage_imposable += (i[0] - i[1])*i[2]
        prix_payes += i[1] * i[2]
    if vente == 0 and prix_vente == 0 and deduction_employe == True:
        self.advantage_action = avantage_imposable * 0.5
        return self.advantage_action
    elif vente == 0 and prix_vente == 0 and deduction_employe == False:
        self.advantage_action = avantage_imposable
        return self.advantage_action
    if deduction_employe == True:
        gain_cap_impos = vente*prix_vente - prix_payes - avantage_imposable
        self.advantage_action = avantage_imposable + gain_cap_impos * 0.5
        return self.advantage_action
    elif deduction_employe == False:
        gain_cap_impos = vente*prix_vente - prix_payes - avantage_imposable
        self.advantage_action = avantage_imposable + gain_cap_impos
        return self.advantage_action</pre></li>
  </ul>
</div>

<div class="card" id="sb">
  <div class="card-header">
    sb # salaire brut
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      sb(salaire_net=14730, impot_revenu_fed_prov=4602, rrq=1027, ass_emploi=275, ass_parentale=116, rpa=1100, cot_syndic=150) # 231
      <pre>def sb(self, salaire_net = 0, impot_revenu_fed_prov = 0, rrq = 0, ass_emploi = 0, ass_parentale = 0, rpa = 0, cot_syndic = 0, ass_collectif = 0):
      self.rpa = rpa
      print("[INFO] revenu_brut.RevenuBrut.sb() Régime de rentes du Québec crédit d'impôt", rrq)
      print("[INFO] revenu_brut.RevenuBrut.sb() Assurance emploi crédit d'impôt", ass_emploi)
      print("[INFO] revenu_brut.RevenuBrut.sb() Régime du Québec d'assurance parentale crédit d'impôt", ass_parentale)
      self.salaire_brut = salaire_net + impot_revenu_fed_prov + rrq + ass_emploi + ass_parentale + rpa + cot_syndic + ass_collectif
      return self.salaire_brut</pre></li>
  </ul>
</div>

<div class="card" id="rbe">
  <div class="card-header">
    rbe # revenu brut emploi
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      rbe(salaire_brut=66000, commission_brute=24000, honoraire_admn=5000, patron_cot_rpa=9000, patron_cot_rac=750, patron_cot_av=1600, patron_frais_scol_travail=400, patron_stationnement_perso=600) # 235
      <pre>def rbe(self, salaire_brut = 0, commission_brute = 0, patron_voyage_perso = 0, patron_frais_scol_perso = 0, advantage_pret = 0, honoraire_admn = 0, patron_cot_av = 0, patron_stationnement_perso = 0, advantage_action = 0, patron_cot_reer = 0, patron_frais_representation = 0, patron_cot_rpa = 0, patron_cot_rac = 0, patron_frais_scol_travail = 0, patron_frais_deplacement = 0): # av pour assurance-vie
      self.patron_frais_deplacement = patron_frais_deplacement
      self.commission_brute = commission_brute
      if not salaire_brut == 0:
          self.salaire_brut = salaire_brut
      if not advantage_action == 0:
          self.advantage_action = advantage_action
      patron_cot_rpa = 0
      patron_cot_rac = 0 # Régime assurance collectif contre la maladie ou les accidents
      patron_frais_scol_travail = 0
      self.revenu_brut_emploi = self.salaire_brut + patron_voyage_perso + patron_frais_scol_perso + self.cauto.imposable + advantage_pret + commission_brute + honoraire_admn + patron_cot_av + patron_stationnement_perso + self.advantage_action + patron_cot_reer + patron_frais_representation
      return self.revenu_brut_emploi</pre></li>
  </ul>
</div>

<div class="card" id="bure">
  <div class="card-header">
    bure # bureau
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      bure(fourn_cons=500, loyer_bureau=600, mois=12, salaire_adjoint=5000) # 229
      <br>
      <pre>def bure(self, fourn_cons = 0, loyer_bureau = 0, mois = 0, salaire_adjoint = 0):
      self.bureau = fourn_cons + loyer_bureau * mois + salaire_adjoint
      return self.bureau</pre></li>
  </ul>
</div>

<div class="card" id="dah">
  <div class="card-header">
    dah # déduction selon l'article 8
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      dah(rpa=1100, cot_syndic=150, cot_professionnelle=700, frais_cartes_affaires=230) # 231
      <br>
      <pre>def dah(self, depense_ext = 0, cot_syndic = 0, rpa = 0, bureau_centre_ville = 0, cot_professionnelle = 0, don = 0, frais_cartes_affaires = 0):
        if not rpa == 0:
            self.rpa = rpa
        if not bureau_centre_ville == 0:
          self.bureau = bureau_centre_ville
      if self.rpa == 0:
          self.rpa = rpa
      self.deduction_article_huit = depense_ext + cot_syndic + rpa + self.bureau + cot_professionnelle
      if self.patron_frais_deplacement == 0:
          self.deduction_article_huit+= self.cauto.deductible_amort_interet_pret
      if self.patron_frais_deplacement == 0:
          self.cauto.deduction_frais_fonctionnement = 0
      if self.est_vendeur == False:
          self.frais_representation = 0
          self.membre_commerce = 0
          self.deduction_article_huit+= self.cauto.deduction_frais_fonctionnement + self.frais_repas*0.5 + self.hebergement + self.frais_stationnement + self.frais_representation + self.membre_commerce
      return self.deduction_article_huit</pre></li>
  </ul>
</div>

<div class="card" id="dahv">
  <div class="card-header">
    dahv # déduction selon l'article 8 pour un vendeur à commission
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      dahv(publicite=2500, location_ordi=875) # 233
      <br>
      <pre>def dahv(self, telephone_bureau_centre_ville = 0, publicite = 0, location_ordi = 0):
      self.deduction_article_huit_vendeur = telephone_bureau_centre_ville + publicite + location_ordi
      if self.est_vendeur == True:
          self.deduction_article_huit_vendeur+= self.cauto.deduction_frais_fonctionnement + self.frais_repas*0.5 + self.hebergement + self.frais_stationnement + self.frais_representation*0.5 + self.membre_commerce
      return self.deduction_article_huit_vendeur</pre></li>
  </ul>
</div>

<div class="card" id="calcul">
  <div class="card-header">
    calcul
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      calcul()
      <br>
      <pre>def calcul(self):
      self.revenu_net_emploi = self.revenu_brut_emploi - self.deduction_article_huit - self.commission_brute if self.deduction_article_huit_vendeur > self.commission_brute else self.revenu_brut_emploi - self.deduction_article_huit - self.deduction_article_huit_vendeur
      print("[INFO] revenu_brut.RevenuBrut.calcul()", round(self.revenu_brut_emploi), round(self.deduction_article_huit), round(self.commission_brute if self.deduction_article_huit_vendeur > self.commission_brute else self.revenu_brut_emploi), round(self.revenu_net_emploi))
      return f"{round(self.revenu_brut_emploi)} {round(self.deduction_article_huit)} {round(self.deduction_article_huit_vendeur)} {round(self.revenu_net_emploi)}"</pre></li>
  </ul>
</div>


{% endblock %}