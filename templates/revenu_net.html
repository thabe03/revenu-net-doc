{% extends 'base.html' %}

{% block content %}
<style>
  main{
    margin:1rem;
  }
  .card{
    margin-bottom:1rem;
    margin-top:1rem;
  }
</style>
<h1>import revenu_net</h1>
<h2>Class RevenuNet</h2>
<h3>Constructors</h3>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Constructor and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#revenu_net">RevenuNet()</a><br>Instancier un objet <a href="#revenu_net">RevenuNet</a>.</td>
    </tr>
  </tbody>
</table>

<h3>Method Summary</h3>

<table class="table">
  <thead>
    <tr>
      <th scope="col" class="w-25">Modifier and Type</th>
      <th scope="col">Method and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Double</td>
      <td><a href="#fd">def fd(int km_proximite_travail_etude, double repas_par_jour = 0, double logement_par_jour = 0, int jour = 0, double resiliation_bail = 0, double demenagement = 0, double entreposage = 0, double notaire_pa = 0, double veterinaire = 0, double frais_amenagement = 0, double portion_deduite_ap = 0)</a><br><i>Votre nouvelle résidence doit être située au moins 40 kilomètres plus près (par le plus court chemin du réseau routier public) de votre nouveau lieu de travail ou d’études.</i><br>Coût des repas par jour, coût du logement par jour, <i><u>le nombre de jour</u></i>, les coûts de résiliation du bail, le coût du démnagement, le coût de l'entreprosage et du transposage des effets personnels, le coût du notaire pour les <u>premiers acheteurs seulement</u> <i>frais juridiques non admis pour les premiers acheteurs</i>, les coûts de vétérinaire, les frais d'aménagement, la portion déduite de l'année précédante.
      </td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#a">a(double revenu_net_emploi = 0, double revenu_entreprise = 0, double revenu_agricole = 0, double revenu_interet = 0, double revenu_dividende_ordinaire = 0, double revenu_dividende_determine = 0, double pension_ex = 0, double ferr = 0, double psv = 0, double rpa = 0, double rrq = 0, double prestation_retraite = 0, double allocation_depart_retraite = 0, double prestation_consecutive_deces = 0, double police_ass = 0, double bourse_etude = 0, double revenu_location = 0, double reer = [0,0], double indeminite_accident = 0, double moins_conseiller = 0)</a><br>Le revenu d'intérêts - intérêt sur les obligations dont la location d'un coffret de sureté pour conserver ses placements, le revenu de dividendes ordinaires majorées à 15%, le revenu net de dividendes déterminées majorées à 38%, la pension reçue de l'ex-conjoint(e), les sommes reçues d'un fonds enregistré de revenu de retraite, les prestations de la sécurité de la vieillesse, le régime de pension agréé ou <a href="/revenu_brut#sb">déclarer rpa dans sb()</a> ou <a href="/revenu_brut#rbe">rbe()</a>, le régime de rente du Québec ou <a href="/revenu_brut#sb">déclarer rrq dans sb()</a>, une prestation de retraite <i>56(1)a(i)</i>, une allocation de départ à la retraite <i>56(1)a(ii)</i>, une prestation consécutive au décès, une police d'assurance-vie <u><i><b>non imposable</b></i></u>, bourses d'étude exonérées de l'impôt lorsqu'elles sont reçues par un étudiant <u><i><b>non imposable</b></i></u>, revenu de location, fonds retirés d'un reer après déductions à la source additionnés aux déductions à la source, indemnité suite à un accident de travail, honoraire pour un conseiller en placement.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#b">b(double gain_capital_imposable = 0, double perte_capital_deductible = 0, double perte_placement = 0)</a><br><i>Les PDTPE sont des pertes en capital déductibles à l'alinéa 3d et non à l'alinéa 3b.<br>La moitié de cette perte constitue une perte déductible au titre d'un placement d'entreprise (PDTPE).<br>Les PDTPE <u>ne</u> peuvent <u>pas</u> être plus élevés que les pertes en capital déductibles.</i><br><i>Le gain en capital imposable représente 50 % de ce gain, alors que 50 % de la perte représente la perte en capital déductible.</i></td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#c">c(double autres = 0, double pension_ex = 0, double frais_exploration = 0, double frais_opposition = 0, double frais_demenagement = 0, double montant_fractionne = 0.0, double frais_proc_ass_emploi = 0, double prestation_consecutive_deces = 0, double reer = 0, double frais_scolarite = 0)</a><br>La pension donnée à l'ex-conjoint(e), les frais d'exploration et d'aménagement <i>en vertu de l'article 66.1</i>, honoraire d'avocat pour une opposition à une cotisation d'impôt pour l'AC, frais de déménagement <i>utiliser <a href="#fd">fd</a></i>,  le pourcentage de montant fractionné 0.5 étant 50%, les frais payés à un comptable pour préprarer une procédure d'appel en matière d'assurance-emploi, somme de reconnaissance de longues années de services de la part de l'employeur du défun, les versements à un REER <i>Régime épargne enregistré retraite</i>, <u>les frais de scolarité sont admissibles à un crédit d'impôt</u>.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#d">d(double perte_entreprise = 0, double perte_loyer = 0, double perte_agricole = 0, double perte_agricole_principale = 0</a><br>Perte agricole principale à savoir 1 étant la source de revenue principale.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#calcul">calcul(double ap = 0, double ap_agricole = 0, double ap_autre = 0, double ap_capital = 0)</a><br>Le solde de perte <u>AP</u>, les pertes agricoles restreintes, les pertes autres qu'en capital, les pertes en capital nettes.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#reporter">reporter(string art, string sticker, double reporte = 0, double montant = 0, double total = 0)</a><br>L'article associé, le label à reporter<br>Combinaison possible<br><ul><li>Le montant > 0 et le total == 0, on retourne le montant</li><li>Le montant > 0 et le total > 0 et le montant > total, on retourne le (total - montant) * -1 <i>(5000-2000)*-1=3000 à reporter</i></li><li>Le montant > 0 et le total > 0 et le montant &lt; total, on retourne le montant</li></ul></td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_pension">credit_pension()</a><br>Un <u>maximum</u> de 15% de <i>2000</i>. 15% du revenu de retraite <a href="#a">déclarer revenu_retraite dans a()</a>.<br>Crédit d'impôt pour le revenu de retraite provenant du régime de retraite d'un employeur.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_conjoint">credit_conjoint(double epoux = 0)</a><br><u><i><b>Si</b> le conjoint ne travaille peu ou pas.</i></u><br>Un <u>maximum</u> de 15% du montant personnel de base <i>12 069</i>.<br>(Le montant personnel de base - le revenu net de monsieur/madame) * 15%.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_personnel_base">credit_personnel_base()</a><br>15% du montant personnel de base <i>12 069</i>.<br>Crédit d'impôt pour <i>tous</i>.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_scolarite">credit_scolarite(double montant_scolarite = 0)</a><br>Un <u>maximum</u> de 15% de <i>5000</i>.<br>Crédit d'impôt pour frais de scolarité.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_transfere">credit_transfere(double montant_credit_transfere)</a><br>Transfert provenant d'un conjoint ou d'un enfant.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_frais_medicaux">credit_frais_medicaux(double montant_frais_medicaux, double remb_ass = 0)</a><br>Les frais médicaux sont <u><i><b>déductibles</b></i></u> ainsi que la contribution à un régime privé d'assurance-maladie. Cependant, on soustrait du calcul de ce qu'on considère comme <u><i><b>déductible</b></i></u> le remboursement du régime privé d'assurance-maladie. Ensuite, de ce calcul, on soustrait 3% du revenu net jusqu'à un <u>maximum</u> de <i>2352</i>. On fait 15% de ce calcul.<br><br><b>Étude de cas</b><br><ul><li>J'ai 2225 de frais médicaux</li><li>Ma prime pour mon régime privé d'assurance-maladie est de 500</li><li>Ma cotisation pour mon régime privé d'assurance-maladie est de 1500</li><li>Mon revenu net est de 80 200</li></ul>((2225+1500-500) - (0.03*80 200 (max. 2352)))*0.15<br><br>La prime d'assurance maladie privé <a href="/revenu_brut#sb">déclarer ass_maladie_prive dans sb()</a>.<br>Autres frais médicaux.<br>Le remboursement de l'assurance privé.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_don">credit_don(double montant_don)</a><br>Les premiers <i>200</i> sont soumis à un crédit d'impôt de 15%. Le reste est soumis à un crédit d'impôt de 29%.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_dividende_determine">credit_dividende_determine()</a><br><i>6/11</i> du (revenu de dividendes déterminés provenant de sociétés publiques canadiennes majorés à 138% - le revenu de dividendes déterminés réel).<br><a href="#a">Déclarer revenu_dividende_determine dans a()</a>.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_personne_charge">credit_personne_charge(double montant_personne_charge)</a><br><u><i><b>Si</b> la personne n’a pas d’époux ou de conjoint de fait.</i></u><br>Un <u>maximum</u> de 15% du montant personnel de base <i>12 069</i>.<br>(Le montant personnel de base - le revenu net de l'enfant à charge) * 15%.</td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credit_cad_emploi">credit_cad_emploi()</a><br><u><i><b>Si</b> la personne n'est pas travailleur indépendant.</i></u><br>Un <u>maximum</u> de 15% de <i>1222</i>. 15% du revenu net d'emploi. Crédit d'impôt pour <i>tous</i>.</td>
    </tr>
    <tr>
      <td>Void</td>
      <td><a href="#calcul_credits">calcul_credits()</a><br><ul><li>imposition_revenu() <i>calcul le revenu imposable</i></li><li>credits() <i>calcul la somme de tous les crédits d'impôts</i></li><li>imposition_base() <i>calcul l'impôt fédéral de base, c'est-à-dire le revenu imposable <a href="imposition_revenu">imposition_revenu()</a> - tous les crédits d'impôts</i></li><li>credit_abattement() <i>calcul l'abattement pour les résidents du Québec, c'est-à-dire 16.5% du calcul résultat précédant</i></li><li>imposition_federale() <i>est la soustraction du résultat en point 2 - le credit_abattement</i></li></ul></td>
    </tr>
    <tr>
      <td>Double</td>
      <td><a href="#credits">credits(double credit_salaire_result = 0)</a><br>La somme de tous les crédits d'impôts.</td>
    </tr>
  </tbody>
</table>


<div class="card" id="revenu_net">
  <div class="card-header">
    RevenuNet
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">RevenuNet()<br><pre>class RevenuNet:  
    def __init__(self, crb = rb.RevenuBrut()):
      self.revenu = 0
      self.gain_perte = 0
      self.deduction = 0
      self.perte_autre = 0
      self.perte_placement = 0
      self.pertes = 0
      self.rpa = 0
      self.beneficiaire = 0
      self.frais_demenagement = 0
      self.psv = 0
      self.revenu_agricole = 0
      self.perte_agricole = 0
      self.perte_agricole_restreinte = 0
      self.perte_capital = 0
      self.revenu_retraite = 0
      self.montant_personnel_base = 12069
      self.raison_age_limite_inf = 37790
      self.raison_age_limite_sup = 87750
      self.raison_age_montant_maximal = 7494
      self.credit_pension_result = 0
      self.credit_conjoint_result = 0
      self.credit_raison_age_result = 0
      self.credit_personnel_base_result = 0
      self.credit_scolarite_result = 0
      self.credit_frais_medicaux_result = 0
      self.credit_don_result = 0
      self.credit_dividende_determine_result = 0
      self.revenu_dividende_determine = 0
      self.frais_medicaux_limite = 2352
      self.don_taux_premier = 0.15
      self.don_taux_reste = 0.29
      self.don_montant_premier = 200
      self.dividende_determine_majoration = 6/11
      self.imposition_revenu_pallier_un = 47630
      self.imposition_revenu_pallier_deux = 95259
      self.imposition_revenu_pallier_trois = 147667
      self.imposition_revenu_pallier_quatre = 210371
      self.imposition_revenu_pallier_un_taux = 0.15
      self.imposition_revenu_pallier_deux_taux = 0.205
      self.imposition_revenu_pallier_trois_taux = 0.26
      self.imposition_revenu_pallier_quatre_taux = 0.29
      self.imposition_revenu_pallier_cinq_taux = 0.33
      self.imposition_revenu_result = 0
      self.calcul_result = 0
      self.credit_personne_charge_result = 0
      self.credit_cad_emploi_result = 0
      self.cad_emploi_limite = 1222
      self.crb = crb
      self.imposition_base_result = 0
      self.credits_result = 0
      self.abattement_taux = 0.165
      self.credit_abattement_result = 0
      self.imposition_federale_result = 0
      self.imposition_federale_deduit_source = self.crb.impot_fed
      self.scolarite_limite = 5000
      self.gain_capital_imposable = 0
      self.credit_transferable_result = 0
      self.credit_salaire_result = 0
      self.credit_transfere_result = 0</pre></li>
  </ul>
</div>

<div class="card" id="fd">
  <div class="card-header">
    fd # frais de déménagement
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      fd(km_proximite_travail_etude=0,demenagement=1200, jour=1) # 247
      <br>
      <pre>def fd(self, km_proximite_travail_etude, repas_par_jour = 0, logement_par_jour = 0, jour = 0, resiliation_bail = 0, demenagement = 0, entreposage = 0, notaire_pa = 0, veterinaire = 0, frais_amenagement = 0, portion_deduite_ap = 0):
      if jour == 0:
        print("[ERREUR] fd déclarer le nombre de jour")
        return 0
      elif km_proximite_travail_etude < 40:
        print("[INFO] fd Le déménagement ne se rapproche pas de 40 km au moins du nouveau lieu de travail ou d'étude")
        return 0
      if jour > 15:
        repas_par_jour = 15*repas_par_jour
        logement_par_jour = 15*logement_par_jour
      else:
        repas_par_jour = jour*repas_par_jour
        logement_par_jour = jour*logement_par_jour
      self.frais_demenagement = (repas_par_jour + logement_par_jour + resiliation_bail + demenagement + entreposage + notaire_pa + veterinaire + frais_amenagement) - portion_deduite_ap
      return self.frais_demenagement</pre></li>
  </ul>
</div>

<div class="card" id="a">
  <div class="card-header">
    a # alinéa 3a)
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">a(revenu_net_emploi=52000, revenu_entreprise=2000, revenu_interet=100, revenu_dividende_ordinaire=800, pension_ex=6000, ferr=400) # 203<br><pre>def a(self, revenu_net_emploi = 0, revenu_entreprise = 0, revenu_agricole = 0, revenu_interet = [0,0], revenu_dividende_ordinaire = 0, revenu_dividende_determine = 0, pension_ex = 0, ferr = 0, psv = 0, rpa = 0, rrq = 0, prestation_retraite = 0, allocation_depart_retraite = 0, prestation_consecutive_deces = 0, police_ass = 0, bourse_etude = 0, revenu_location = 0, reer = [0,0], indeminite_accident = 0, revenu_dividende_etranger = 0, moins_conseiller = 0):
    police_ass = 0
    bourse_etude = 0
    self.rpa = rpa
    self.psv = psv
    self.revenu_agricole = revenu_agricole
    self.indeminite_accident = indeminite_accident
    prestation_consecutive_deces = prestation_consecutive_deces-self.dd([prestation_consecutive_deces]) if prestation_consecutive_deces - self.dd([prestation_consecutive_deces]) > 0 else 0
    self.revenu = revenu_net_emploi + revenu_entreprise + self.revenu_agricole + revenu_interet[0]-revenu_interet[1] + revenu_dividende_ordinaire+int(revenu_dividende_ordinaire*0.15) + revenu_dividende_determine+int(revenu_dividende_determine*0.38) + pension_ex + ferr + self.psv + self.rpa + rrq + prestation_retraite + allocation_depart_retraite + prestation_consecutive_deces + revenu_location + reer[0]+reer[1] + self.indeminite_accident + revenu_dividende_etranger*100/85 - moins_conseiller
    return self.revenu</pre></li>
  </ul>
</div>

<div class="card" id="b">
  <div class="card-header">
    b # alinéa 3b)
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      b(gain_capital_imposable=1300, perte_capital_deductible=15000, perte_placement=15000) # 201a
      <pre>def b(self, gain_capital_imposable = 0, perte_capital_deductible = 0, perte_placement = 0):
      gain_capital_imposable = gain_capital_imposable*0.5
      perte_capital_deductible = perte_capital_deductible*0.5
      self.perte_placement = perte_placement*0.5
      self.gain_perte = gain_capital_imposable - (perte_capital_deductible - self.perte_placement)
      if self.gain_perte < 0:
        self.perte_capital = reporter("b", "Perte en capital", 1, perte_capital_deductible, gain_capital_imposable + self.perte_placement)
        self.gain_perte = 0
        return self.gain_perte
      else:
        return self.gain_perte </pre></li>
  </ul>
</div>

<div class="card" id="c">
  <div class="card-header">
    c # alinéa 3c)
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      c(frais_proc_ass_emploi=500,pension_ex=15000, frais_scolarite=2000) # 243
      <pre>def c(self, autres = 0, pension_ex = 0, frais_exploration = 0, frais_opposition = 0, frais_demenagement = 0, montant_fractionne = 0.0, frais_proc_ass_emploi = 0, prestation_consecutive_deces = 0, reer = 0, frais_scolarite = 0, prime_ass_vie_med_dent = 0):
      if not frais_demenagement == 0:
        self.frais_demenagement = frais_demenagement
      if frais_scolarite > 0:
        print("[INFO] revenu_net.RevenuNet.c crédit d'impôt pour frais de scolarité", frais_scolarite)
        frais_scolarite = 0
      if montant_fractionne > 0:
        montant_fractionne = self.rpa * montant_fractionne
      b = self.revenu + self.gain_perte
      pension_ex = reporter("c", "Pension alimentaire de l'ex-conjoint", 0, pension_ex, b)
      frais_exploration = reporter("c", "Frais d'exploration", 1, frais_exploration, b)
      frais_opposition = reporter("c", "Frais d'opposition", 1, frais_opposition, b)
      self.frais_demenagement = reporter("c", "Frais de déménagement", 1, self.frais_demenagement, b)
      montant_fractionne = reporter("c", "Montant fractionné", 1, montant_fractionne, b)
      frais_proc_ass_emploi = reporter("c", "Frais d'appel en matière d'assurance-emploi", 1, frais_proc_ass_emploi, b)
      prestation_consecutive_deces = reporter("c", "Prestation consécutive au décès", 1, prestation_consecutive_deces, b)
      reer = reporter("c", "Contribution au REER", 1, reer, b)
      self.deduction = autres + pension_ex + frais_exploration + frais_opposition + self.frais_demenagement + montant_fractionne + frais_proc_ass_emploi + prestation_consecutive_deces + reer
      if 0.15*(b-self.deduction-77580) > 0 and not self.psv == 0:
        tmp = self.psv
        self.psv = 0.15*(b-self.deduction-77580)
        if self.psv > tmp:
            self.psv = tmp
      else:
        self.psv = 0
      self.psv = reporter("c", "Prestation de service vieillesse", 1, self.psv, b)
      self.deduction += self.psv
      return self.deduction</pre></li>
  </ul>
</div>

<div class="card" id="d">
  <div class="card-header">
    d # alinéa 3d)
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      d(perte_loyer=4000, perte_entreprise=10000) # 201c
      <br>
      <pre>def d(self, perte_entreprise = 0, perte_loyer = 0, perte_agricole = 0, perte_agricole_principale = 0):
      c = self.revenu + self.gain_perte - self.deduction    
      self.perte_autre = perte_entreprise + self.perte_placement + perte_loyer + self.indeminite_accident
      self.perte_autre = reporter("d", "Perte autre qu'en capital", 1, self.perte_autre, c)
      if perte_agricole_principale == 0 and not perte_agricole == 0:
        self.perte_agricole = perte_agricole - (2500 + (0.5*(perte_agricole-2500)))
        print(f"[INFO] d Perte agricole restreinte {self.perte_agricole} à reporter")
      elif not perte_agricole_principale == 0 and not perte_agricole == 0:
        self.perte_agricole = perte_agricole
        print(f"[INFO] d Perte agricole {self.perte_agricole} à reporter")
      self.pertes = self.perte_autre + (round(2500 + (0.5*(perte_agricole-2500))) if not perte_agricole == 0 else 0)
      return self.pertes</pre></li>
  </ul>
</div>

<div class="card" id="calcul">
  <div class="card-header">
    calcul
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      calcul(ap_agricole=10000, ap_autre=70000, ap_capital=35000) # 251
      <br>
      <pre>def calcul(self, ap = 0, ap_agricole = 0, ap_autre = 0, ap_capital = 0):
      message = f"{round(self.revenu)} + {round(self.gain_perte)} - {round(self.deduction)} - {round(self.pertes)} "
      message_reporte = ""
      calcul = self.revenu + self.gain_perte - self.deduction - self.pertes
      if not ap == 0:
        reporte = 0 if calcul - ap > 0 else calcul - ap
        if not reporte == 0:
          message_reporte += f"[INFO] calcul AP {round(reporte)*-1} à reporter\n"
        calcul -= (ap + reporte)
        message += f"- {round(ap+reporte)} "
      if not ap_agricole == 0:
        reporte = 0 if self.revenu_agricole - ap_agricole > 0 else self.revenu_agricole - ap_agricole
        calcul -= (ap_agricole + reporte)
        if not reporte == 0:
          message_reporte += f"[INFO] calcul AP Perte agricole {round(reporte)*-1} à reporter\n"
        message += f"- {round(ap_agricole+reporte)} "
      if not ap_autre == 0:
        reporte = 0 if calcul - ap_autre > 0 else calcul - ap_autre
        if not reporte == 0:
          message_reporte += f"[INFO] calcul AP Perte autre qu'en capital {round(reporte)*-1} à reporter\n"
        calcul -= (ap_autre + reporte)
        message += f"- {round(ap_autre+reporte)} "
      if not ap_capital == 0:
        reporte = 0 if calcul - ap_capital > 0 else calcul - ap_capital
        if not reporte == 0:
          message_reporte += f"[INFO] calcul AP Perte en capital {round(reporte)*-1} à reporter\n"
        calcul -= (ap_capital + reporte)
        message += f"- {round(ap_capital+reporte)} "
      message+= f"= {round(calcul)}"
      print(message_reporte+message)
      return message</pre></li>
  </ul>
</div>

<div class="card" id="reporter">
  <div class="card-header">
    reporter
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <pre>def reporter(art, sticker, reporte = 0, montant = 0, total = 0):     
      if reporte == 1:
        reporte = "à reporter"
      elif reporte == 0:
        reporte = "non reportable"

      if not montant == 0 and total == 0:
        print("[INFO]", art, sticker, montant, reporte)
        return 0
      elif not montant == 0 and not total == 0 and montant > total:
        print("[INFO]", art, sticker, (total-montant)*-1, reporte)
        return total
      elif not montant == 0 and not total == 0 and montant < total:
        return montant
      else:
        return 0</pre></li>
  </ul>
</div>

<div class="card" id="credit_pension">
  <div class="card-header">
    credit_pension # crédit de pension
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_pension() # 262
      <br>
      <pre>def credit_pension(self):   
      self.credit_pension_result = min(self.revenu_retraite, 2000)*0.15
      print(f"[INFO] credit_pension {round(self.credit_pension_result)}")
      return self.credit_pension_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_conjoint">
  <div class="card-header">
    credit_conjoint # crédit personnel pour conjoint
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_conjoint(epoux=7500) # 262
      <br>
      <pre>def credit_conjoint(self, epoux):
      self.credit_conjoint_result = (self.montant_personnel_base - epoux)*0.15
      print(f"[INFO] credit_conjoint {round(self.credit_conjoint_result)}")
      return self.credit_conjoint_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_personnel_base">
  <div class="card-header">
    credit_personnel_base # crédit d'impôt personnel de base
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_personnel_base() # 262
      <br>
      <pre>def credit_personnel_base(self):
      self.credit_personnel_base_result = self.montant_personnel_base*0.15
      print(f"[INFO] credit_personnel_base {round(self.credit_personnel_base_result)}")
      return self.credit_personnel_base_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_scolarite">
  <div class="card-header">
    credit_scolarite # crédit de scolarité
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_scolarite(montant_scolarite=2000) # 262
      <br>
      <pre>def credit_scolarite(self, montant_scolarite):
      self.credit_scolarite_result = min((montant_scolarite*0.15), self.scolarite_limite*0.15)
      print(f"[INFO] credit_scolarite {round(self.credit_scolarite_result)}")
      return self.credit_scolarite_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_transfere">
  <div class="card-header">
    credit_transfere # crédit transféré provenant d'un conjoint ou d'un enfant
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_transfere(montant_credit_transfere=1124) # 262
      <br>
      <pre>def credit_transfere(self, montant_credit_transfere):
      self.credit_transfere_result = montant_credit_transfere</pre></li>
  </ul>
</div>

<div class="card" id="credit_frais_medicaux">
  <div class="card-header">
    credit_frais_medicaux # crédit pour frais médicaux
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_frais_medicaux(montant_frais_medicaux=2225, remb_ass=500) # 264_André
      <br>
      <pre>def credit_frais_medicaux(self, montant_frais_medicaux, remb_ass = 0):
      self.credit_frais_medicaux_result = (montant_frais_medicaux - remb_ass - (0.03*(self.revenu + self.gain_perte - self.deduction) if 0.03*(self.revenu + self.gain_perte - self.deduction) &lt; self.frais_medicaux_limite else self.frais_medicaux_limite))*0.15
      print(f"[INFO] credit_frais_medicaux {round(self.credit_frais_medicaux_result)}")
      return self.credit_frais_medicaux_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_don">
  <div class="card-header">
    credit_don # crédit pour dons
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_don(montant_don=500) # 262
      <br>
      <pre>def credit_don(self, montant_don): # à faire
      if not montant_don < 200:
        self.credit_don_result = (self.don_montant_premier * self.don_taux_premier) + ((montant_don - self.don_montant_premier)*self.don_taux_reste)
      else:
        self.credit_don_result = montant_don * self.don_taux_premier
      print(f"[INFO] credit_don {round(self.credit_don_result)}")
      return self.credit_don_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_dividende_determine">
  <div class="card-header">
    credit_dividende_determine # crédit du revenu de dividendes déterminés
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_dividende_determine() # 262
      <br>
      <pre>def credit_dividende_determine(self):
      self.credit_dividende_determine_result = ((self.revenu_dividende_determine+int(self.revenu_dividende_determine*0.38))-self.revenu_dividende_determine)*self.dividende_determine_majoration
      print(f"[INFO] credit_dividende_determine {round(self.credit_dividende_determine_result)}")
      return self.credit_dividende_determine_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_personne_charge">
  <div class="card-header">
    credit_personne_charge # crédit d'impôt personnel pour personne à charge
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_personne_charge(montant_personne_charge=3900) # 264_André
      <br>
      <pre>def credit_personne_charge(self, montant_personne_charge):
      self.credit_personne_charge_result = (self.montant_personnel_base - montant_personne_charge)*0.15
      print(f"[INFO] credit_personne_charge {round(self.credit_personne_charge_result)}")
      return self.credit_personne_charge_result</pre></li>
  </ul>
</div>

<div class="card" id="credit_cad_emploi">
  <div class="card-header">
    credit_cad_emploi # crédit canadien pour emploi
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credit_cad_emploi() # 264_André
      <br>
      <pre>def credit_cad_emploi(self):
      self.credit_cad_emploi_result = min(self.cad_emploi_limite, self.calcul_result)*0.15
      print(f"[INFO] credit_cad_emploi {round(self.credit_cad_emploi_result)}")
      return self.credit_cad_emploi_result</pre></li>
  </ul>
</div>

<div class="card" id="calcul_credits">
  <div class="card-header">
    calcul_credits # calcul l'impôt fédéral à payer ou à recevoir
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      calcul_credits() # 264_André
      <br>
      <pre>def calcul_credits(self):
      self.imposition_revenu()
      self.credits()
      self.imposition_base()
      self.credit_abattement()
      self.imposition_federale()</pre></li>
  </ul>
</div>

<div class="card" id="credits">
  <div class="card-header">
    credits # la somme de tous les crédits d'impôt
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      credits() # 264_André
      <br>
      <pre>def credits(self, credit_salaire_result = 0):
      self.credit_salaire_result = credit_salaire_result
      if not self.crb.credit_salaire_result == 0:
        self.credit_salaire_result = self.crb.credit_salaire_result
      array = [self.credit_pension_result, self.credit_conjoint_result, self.credit_raison_age_result, self.credit_personnel_base_result, self.credit_scolarite_result, self.credit_frais_medicaux_result, self.credit_don_result, self.credit_dividende_determine_result, self.credit_personne_charge_result, self.credit_salaire_result, self.credit_cad_emploi_result, self.credit_transfere_result]
      message = ""
      credits = 0
      for i in range(len(array)):
        credits += array[i]
        if not array[i] == 0:
          message += f"{round(array[i])} + "
      self.credits_result = credits
      message = message[:-3]
      print(f"[INFO] credits {message} = {round(credits)}")
      return message</pre></li>
  </ul>
</div>


{% endblock %}